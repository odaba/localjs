<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<META NAME=KEYWORDS CONTENT="LocalJS Documentation JavaScript Trusted browser local access HTML CSS WPF COM .Net Windows API">
<META NAME=DESCRIPTION CONTENT="LocalJS Documentation, JavaScript in Trusted Browser. Fast, Easy and Low Cost. Develop Desktop Application with HTML/CSS/JavaScript, deployed and upgraded from web">
<title>LocalJS: LOCALIZATION Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<div class="site_header"><a href="/">LocalJS Site</a> | <a href="/docs/">Documentation Home</a> | <a href="http://sourceforge.net/projects/localjs/files/" target="_blank">Downloads</a> | <a href="http://sourceforge.net/tracker/?group_id=359375" target="_blank">Report an Issue</a></div>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="pages.html"><span>Getting&nbsp;Started</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
          <span class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </span><span class="right"></span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><b>Open_Source_Objects</b>      </li>
      <li><a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html">LOCALIZATION</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Methods</a>  </div>
  <div class="headertitle">
<h1>LOCALIZATION Class Reference<br/>
<small>
[<a class="el" href="group___j_s_src_objects.html">LocalJS Objects (Open Source)</a>]</small>
</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Open_Source_Objects::LOCALIZATION" -->
<p>Open source object. Provides method for multi-languages support. Include localjs_localization.js, localjs_file.js, localjs_ui.js and localjs_webservice.js to use it.  
<a href="#_details">More...</a></p>

<p><a href="class_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Methods</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#a494b7408816f0e6545fe409d7f14a1a6">setPath</a> (String path,[optional] boolean reload)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the path to language files folder.  <a href="#a494b7408816f0e6545fe409d7f14a1a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#acaf64f0e414c32bfa3c5cee215b06373">setLang</a> (String lang,[optional] boolean reload)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets current language.  <a href="#acaf64f0e414c32bfa3c5cee215b06373"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#ab8161b47b743b715de4683c838c60d4d">getLang</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns current language set by <a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#acaf64f0e414c32bfa3c5cee215b06373" title="Sets current language.">LOCALIZATION.setLang</a>.  <a href="#ab8161b47b743b715de4683c838c60d4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#ad28f052945833b0267c4353afcbf58eb">get</a> (String key)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the String or JavaScript function defined in language file by key specified. If <em>key</em> is not found in language file, <em>key</em> is returned.  <a href="#ad28f052945833b0267c4353afcbf58eb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#a0162e8ff61641568734b65adec1ad183">getAcceptLanguages</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a string indicating user langauge perference set at Internet Options.  <a href="#a0162e8ff61641568734b65adec1ad183"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Open source object. Provides method for multi-languages support. Include localjs_localization.js, localjs_file.js, localjs_ui.js and localjs_webservice.js to use it. </p>
<p><a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html" title="Open source object. Provides method for multi-languages support. Include localjs_localization.js, localjs_file.js, localjs_ui.js and localjs_webservice.js to use it.">LOCALIZATION</a> module uses <a class="el" href="interfacelocal_j_s.html#a3db8e9f0672a2aed8a468da67db3b2e1" title="ReadOnly. Returns a Dictionary Object globally available in the process. An ideal global persistent s...">localJS.globalDict</a> to save the language strings for current language, so the whole process only need to keep one copy of all the strings, which can be shared by all browser windows. The strings for current language are saved in <a class="el" href="interfacelocal_j_s.html#a3db8e9f0672a2aed8a468da67db3b2e1" title="ReadOnly. Returns a Dictionary Object globally available in the process. An ideal global persistent s...">localJS.globalDict</a> with key 'LOCALJS.LOCALIZATION.CURRENT_LANG'. </p>
<hr/><h2>Method Documentation</h2>
<a class="anchor" id="a494b7408816f0e6545fe409d7f14a1a6"></a><!-- doxytag: member="Open_Source_Objects::LOCALIZATION::setPath" ref="a494b7408816f0e6545fe409d7f14a1a6" args="(String path,[optional] boolean reload)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setPath </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[optional] boolean&nbsp;</td>
          <td class="paramname"> <em>reload</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the path to language files folder. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>path</em>&nbsp;</td><td>Path to language files folder. Can be a url or local file path, either absolute or relative to url of current page. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>reload</em>&nbsp;</td><td>Optional. Provided for debugging. If set to <code>true</code>, the language file will always be reloaded from disk even <em>path</em> is same as the <em>path</em> previously set. If set to <code>false</code> or omitted, the language file will be reloaded from disk only when <em>path</em> is different from the <em>path</em> previously set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Language files</b></dt><dd></dd></dl>
<p><a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html" title="Open source object. Provides method for multi-languages support. Include localjs_localization.js, localjs_file.js, localjs_ui.js and localjs_webservice.js to use it.">LOCALIZATION</a> uses language files to define strings for different languages. The language files are in JSON format, one file for each language, named with pattern language_name.json, for instance, 'en.json', 'cn.json'. ALl the language files should be in same folder.</p>
<p>Each key of the JSON format language data should be in type of String. The values can be either String or a JavaScript function. If it's JavaScript function, the function should not call other JavaScript functions defined in the language file.</p>
<p>Sample of language files: </p>
<div class="fragment"><pre class="fragment">    {
        <span class="stringliteral">&quot;years_old&quot;</span> : <span class="stringliteral">&quot; 岁&quot;</span>,
        <span class="stringliteral">&quot;Male&quot;</span> : <span class="stringliteral">&quot;男&quot;</span>,
        <span class="stringliteral">&quot;Female&quot;</span> : <span class="stringliteral">&quot;女&quot;</span>,
        <span class="stringliteral">&quot;formatDate&quot;</span> : function(dt)
                        {
                            <span class="keywordflow">return</span> dt.getFullYear() + <span class="stringliteral">&quot;年&quot;</span> + (dt.getMonth() + 1) + <span class="stringliteral">&quot;月&quot;</span> + dt.getDate() + <span class="stringliteral">&quot;日&quot;</span>;
                        }
    }
</pre></div><p>To call setPath method:</p>
<div class="fragment"><pre class="fragment">    LOCALJS.LOCALIZATION.setPath(<span class="stringliteral">&quot;path_to_language_folder&quot;</span>);
</pre></div> 
</div>
</div>
<a class="anchor" id="acaf64f0e414c32bfa3c5cee215b06373"></a><!-- doxytag: member="Open_Source_Objects::LOCALIZATION::setLang" ref="acaf64f0e414c32bfa3c5cee215b06373" args="(String lang,[optional] boolean reload)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setLang </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[optional] boolean&nbsp;</td>
          <td class="paramname"> <em>reload</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets current language. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lang</em>&nbsp;</td><td>The current language. <a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html" title="Open source object. Provides method for multi-languages support. Include localjs_localization.js, localjs_file.js, localjs_ui.js and localjs_webservice.js to use it.">LOCALIZATION</a> will load corresponding language file under language files folder. For instance, if <em>lang</em> is 'cn', the language file name will be 'cn.json'. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>reload</em>&nbsp;</td><td>Optional. Provided for debugging. If set to <code>true</code>, the language file will always be reloaded from disk even <em>lang</em> is same as the <em>lang</em> previously set. If set to <code>false</code> or omitted, the language file will be reloaded from disk only when <em>lang</em> is different from the <em>lang</em> previously set.</td></tr>
  </table>
  </dd>
</dl>
<p>To set current language:</p>
<div class="fragment"><pre class="fragment">    LOCALJS.LOCALIZATION.setLang(<span class="stringliteral">&#39;cn&#39;</span>);
</pre></div> 
</div>
</div>
<a class="anchor" id="ab8161b47b743b715de4683c838c60d4d"></a><!-- doxytag: member="Open_Source_Objects::LOCALIZATION::getLang" ref="ab8161b47b743b715de4683c838c60d4d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String getLang </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns current language set by <a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#acaf64f0e414c32bfa3c5cee215b06373" title="Sets current language.">LOCALIZATION.setLang</a>. </p>
<p>If <a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#acaf64f0e414c32bfa3c5cee215b06373" title="Sets current language.">LOCALIZATION.setLang</a> is not called before, <code>getLang</code> method returns <code>undefined</code>. </p>

</div>
</div>
<a class="anchor" id="ad28f052945833b0267c4353afcbf58eb"></a><!-- doxytag: member="Open_Source_Objects::LOCALIZATION::get" ref="ad28f052945833b0267c4353afcbf58eb" args="(String key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String get </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>key</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the String or JavaScript function defined in language file by key specified. If <em>key</em> is not found in language file, <em>key</em> is returned. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key</em>&nbsp;</td><td>The key to look for in language file.</td></tr>
  </table>
  </dd>
</dl>
<p>A typical usage of <a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#ad28f052945833b0267c4353afcbf58eb" title="Returns the String or JavaScript function defined in language file by key specified. If key is not found in language file, key is returned.">LOCALIZATION.get</a> function:</p>
<div class="fragment"><pre class="fragment">    var localized_string = LOCALJS.LOCALIZATION.get(<span class="stringliteral">&#39;year&#39;</span>); <span class="comment">// return &#39;年&#39; for langauge &#39;cn&#39;.</span>
</pre></div><p>The language file for default language may not need to include all the keys. For instance, en.json doesn't have to include key 'year':</p>
<div class="fragment"><pre class="fragment">    LOCALJS.LOCALIZATION.setLang(<span class="stringliteral">&#39;en&#39;</span>);
    var year_str = LOCALJS.LOCALIZATION.get(<span class="stringliteral">&#39;year&#39;</span>); <span class="comment">// return &#39;year&#39; even if en.json doesn&#39;t include key &#39;year&#39;.</span>
</pre></div><dl class="user"><dt><b>Use JavaScript function for localization</b></dt><dd></dd></dl>
<p>In some cases, localization is more than string replacement. For instance, localization of date. <a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html" title="Open source object. Provides method for multi-languages support. Include localjs_localization.js, localjs_file.js, localjs_ui.js and localjs_webservice.js to use it.">LOCALIZATION</a> supports using JavaScript function for such cases. Assume there is JavaScript function defined in <code>cn.json</code> as below:</p>
<div class="fragment"><pre class="fragment">    {
        <span class="stringliteral">&quot;formatDate&quot;</span> : function(dt)
                        {
                            <span class="keywordflow">return</span> dt.getFullYear() + <span class="stringliteral">&quot;年&quot;</span> + (dt.getMonth() + 1) + <span class="stringliteral">&quot;月&quot;</span> + dt.getDate() + <span class="stringliteral">&quot;日&quot;</span>;
                        }
    }
</pre></div><p>And <a class="el" href="interface_open___source___objects_1_1_l_o_c_a_l_i_z_a_t_i_o_n.html#ad28f052945833b0267c4353afcbf58eb" title="Returns the String or JavaScript function defined in language file by key specified. If key is not found in language file, key is returned.">LOCALIZATION.get</a> can be called as following:</p>
<div class="fragment"><pre class="fragment">    var dt = <span class="keyword">new</span> Date();
    LOCALJS.LOCALIZATION.setLang(<span class="stringliteral">&#39;cn&#39;</span>);
    var localized_date = LOCALJS.LOCALIZATION.get(<span class="stringliteral">&#39;formatDate&#39;</span>)(dt);
</pre></div> 
</div>
</div>
<a class="anchor" id="a0162e8ff61641568734b65adec1ad183"></a><!-- doxytag: member="Open_Source_Objects::LOCALIZATION::getAcceptLanguages" ref="a0162e8ff61641568734b65adec1ad183" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String getAcceptLanguages </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a string indicating user langauge perference set at Internet Options. </p>
<p>The string returned is same as the HTTP header Accept-Language sent to web server by browser. The same string is returned by PHP variable <code>$_SERVER['HTTP_ACCEPT_LANGUAGE']</code>.</p>
<p>A typical string returned by method getAcceptLanguages is:</p>
<div class="fragment"><pre class="fragment">    var user_lang = LOCALJS.LOCALIZATION.getAcceptLanguages(); <span class="comment">// return &#39;en-us,zh-CN;q=0.7,zh-HK;q=0.3&#39;</span>
</pre></div> 
</div>
</div>
</div>
<hr class="footer"/><div class="footer"><a href="/">LocalJS Site</a> | <a href="/docs/">Documentation Home</a> | <a href="http://sourceforge.net/projects/localjs/files/" target="_blank">Downloads</a> | <a href="http://sourceforge.net/tracker/?group_id=359375" target="_blank">Report an Issue</a></div>
</body>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18928254-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</html>
